if(console.log("jQuery version: "+jQuery.fn.jquery),function(){var e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];console=window.console=window.console||{},e.forEach(function(e){console[e]||(console[e]=function(){})}),console.dump=function(e){window.JSON&&window.JSON.stringify?console.log(JSON.stringify(e)):console.log(e)}}(),Joomla.JText.strings.SUCCESS="Message",void 0===eshiol)var eshiol={};void 0===eshiol.j2xml&&(eshiol.j2xml={}),void 0===eshiol.j2xml.convert&&(eshiol.j2xml.convert=[]),void 0===eshiol.j2xml.validate&&(eshiol.j2xml.validate=[]),eshiol.j2xml.validate.push(function(e){console.log("eshiol.j2xml.library.validate");try{return xmlDoc=jQuery.parseXML(e),xml=jQuery(xmlDoc),root=xml.find(":root")[0],console.log("eshiol.j2xml.library.validated: "+("j2xml"==root.nodeName&&versionCompare(jQuery(root).attr("version"),"15.9.0")>=0)),"j2xml"==root.nodeName&&versionCompare(jQuery(root).attr("version"),"15.9.0")>=0}catch(e){return!1}}),eshiol.j2xml.version="__DEPLOY_VERSION__",console.log("J2XML Library v"+eshiol.j2xml.version),void 0===eshiol.removeMessages&&(eshiol.removeMessages=function(e){void 0===e&&(e=jQuery("#system-message-container")),e.empty(),e.css("display","none"),e.outerHeight(!0),e.css("display","")});const getMessageContainer=e=>{let o;return e instanceof HTMLElement?e:(o=void 0===e||e&&"#system-message-container"===e?document.getElementById("system-message-container"):document.querySelector(e),o)};if(void 0===eshiol.renderMessages&&(eshiol.renderMessages=function(e,o){var s,n=Joomla.getOptions("J2XML"),t=n&&n.Joomla?n.Joomla:"3";"4"==t?(s=void 0===o?getMessageContainer(o):o,[].slice.call(Object.keys(e)).forEach(o=>{let n=o;const t=e[o],r=document.createElement("joomla-alert");["success","info","danger","warning"].indexOf(o)<0&&(n="notice"===o?"info":o,n="message"===o?"success":n,n="error"===o?"danger":n,n="warning"===o?"warning":n),r.setAttribute("type",n),r.setAttribute("close-text",Joomla.Text._("JCLOSE")),r.setAttribute("dismiss",!0);const i=Joomla.Text._(o);if(void 0!==i){const e=document.createElement("div");e.className="alert-heading",e.innerHTML=Joomla.sanitizeHtml(`<span class="${o}"></span><span class="visually-hidden">${Joomla.Text._(o)?Joomla.Text._(o):o}</span>`),r.appendChild(e)}const a=document.createElement("div");a.className="alert-wrapper","string"==typeof e[o]?a.innerHTML+=Joomla.sanitizeHtml(`<div class="alert-message">${e[o]}</div>`):t.forEach(e=>{a.innerHTML+=Joomla.sanitizeHtml(`<div class="alert-message">${e}</div>`)}),r.appendChild(a),s.appendChild(r)})):(s=void 0===o?jQuery("#system-message-container"):jQuery(o),jQuery.each(e,function(e,o){"message"==e&&(e="success");var n=s.find("div.alert.alert-"+e);n[0]?n=n[0]:(jQuery("<button/>",{class:"close","data-dismiss":"alert",type:"button",html:"&times;"}).appendTo(s),n=jQuery("<div/>",{class:"alert alert-"+e}).appendTo(s),jQuery("<h4/>",{class:"alert-heading",html:Joomla.JText._(e,e.charAt(0).toUpperCase()+e.slice(1))}).appendTo(n)),jQuery.each(o,function(e,o){jQuery("<p/>",{html:o}).appendTo(n)})}))}),eshiol.j2xml.codes=["message","notice","message","notice","notice","notice","message","notice","message","notice","message","notice","message","notice","notice","error","notice","error","error","error","message","notice","message","notice","message","notice","message","notice","error","warning","notice","message","notice","message","notice","message","notice","notice","message","notice","message","notice","message","notice","message","notice","notice"],eshiol.j2xml.sendItem=function(e,o){if(e.cids.length){var s=e.cids.shift();isNaN(e.n)&&(e.n=0);var n=Math.floor(100*e.n/e.tot);window.parent.jQuery("#send-progress-bar").css("width",n+"%").attr("aria-valuenow",e.n),window.parent.jQuery("#send-progress-text").html(Joomla.JText._("LIB_J2XML_SENDING").replace("%s",n+"%")),e.n++,console.log("exporting data from "+e.export_url),console.log(o),Joomla.request({url:e.export_url+"&cid[]="+s,data:Object.keys(o).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])}).join("&"),onSuccess:function(n){console.log("export.onSuccess"),console.log("sending data via xmlrpc to "+e.remote_url);var r=JSON.parse(n);p=o,delete p.compression,console.log(p),jQuery.xmlrpc({url:e.remote_url,methodName:"j2xml.importAjax",params:[r.data,JSON.stringify(p)],xhrFields:{withCredentials:!0},success:function(n,r,i){console.log("send.onSuccess"),window.parent.jQuery("input:checkbox[name='checkall-toggle']").prop("checked",!1),window.parent.jQuery("input:checkbox[name='cid[]'][value='"+s+"']").prop("checked",!1),jQuery.each(n,function(e,o){o.forEach(function(e){console.log(e),msg=new Object,e.code in eshiol.j2xml.codes?t=eshiol.j2xml.codes[e.code]:t="notice",msg[t]=[e.message],eshiol.renderMessages(msg,window.parent.document.getElementById("system-message-container"))})}),eshiol.j2xml.sendItem(e,o)},error:function(s,n,r){if(msg=new Object,"object"==typeof r){if(r.code in eshiol.j2xml.codes?t=eshiol.j2xml.codes[r.code]:t="error",msg[t]=[r.message],32==r.code)return eshiol.renderMessages(msg,window.parent.document.getElementById("system-message-container")),void window.parent.jQuery("#send-progress").remove()}else msg.error=[Joomla.Text._("LIB_J2XML_ERROR_UNKNOWN")];eshiol.renderMessages(msg,window.parent.document.getElementById("system-message-container")),eshiol.j2xml.sendItem(e,o)}})},onError:function(s){s.status>0&&Joomla.renderMessages(Joomla.ajaxErrorsMessages(s)),eshiol.j2xml.sendItem(e,o)}})}else window.parent.jQuery("#send-progress").remove()},eshiol.j2xml.send=function(e){if(console.log("eshiol.j2xml.send"),e.cids=[],e.tot=0,e.alert=0,e.error=0,e.success=0,e.warning=0,void 0!==Joomla.getOptions)var o=Joomla.getOptions("progressBarContainerClass","progress progress-striped active"),s=Joomla.getOptions("progressBarClass","bar bar-success");else o="progress progress-striped active",s="bar bar-success";window.parent.jQuery("#system-message-container").prepend('<div id="send-progress" class="send-progress"><div class="'+o+'"><div id="send-progress-bar" class="'+s+'" aria-valuenow="0" aria-valuemin="0" aria-valuemax="'+e.tot+'"></div></div><p class="lead"><span id="send-progress-text" class="sending-text">'+Joomla.JText._("LIB_J2XML_SENDING").replace("%s","0%")+"</span></p></div>");var n={};jQuery("#adminForm input:not(:radio)[name^=jform], #adminForm input:radio[name^=jform]:checked, #adminForm select[name^=jform]").each(function(e){var o=jQuery(this),s=o.attr("name").match(/jform\[(.*)\]/)[1];"send_"==s.substr(0,5)&&(s=s.substr(5)),-1==["cid","remote_url"].indexOf(s)&&(n[s]=o.val())}),navigator.__defineGetter__("userAgent",function(){return eshiol.j2xml.version}),window.parent.jQuery("input:checkbox[name='cid[]']:checked").each(function(){e.cids.push(jQuery(this).val()),e.tot++}),eshiol.j2xml.sendItem(e,n)},eshiol.XMLToString=function(e){return x="undefined"!=typeof XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,x},void 0===strstr)function strstr(e,o,s){var n=0;return e+="",n=e.indexOf(o),-1!=n&&(s?e.substr(0,n):e.slice(n))}eshiol.download=function(e,o){var s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)};

(function(){var a=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];console=window.console=window.console||{};a.forEach(function(b){if(!console[b]){console[b]=function(){}}});console.dump=function(b){if(window.JSON&&window.JSON.stringify){console.log(JSON.stringify(b))}else{console.log(b)}}}());Joomla.JText.strings.SUCCESS="Message";if(typeof(eshiol)==="undefined"){var eshiol={}}if(typeof(eshiol.j2xml)==="undefined"){eshiol.j2xml={}}if(typeof(eshiol.j2xml.convert)==="undefined"){eshiol.j2xml.convert=[]}eshiol.j2xml.version="__DEPLOY_VERSION__";console.log("J2XML Library v"+eshiol.j2xml.version);if(typeof(eshiol.removeMessages)==="undefined"){eshiol.removeMessages=function(a){if(typeof(a)==="undefined"){a=jQuery("#system-message-container")}a.empty();a.css("display","none");a.outerHeight(true);a.css("display","")}}if(typeof(eshiol.renderMessages)==="undefined"){eshiol.renderMessages=function(a,b){if(typeof(b)==="undefined"){b=jQuery("#system-message-container")}jQuery.each(a,function(c,d){if(c=="message"){c="success"}var e=b.find("div.alert.alert-"+c);if(!e[0]){jQuery("<button/>",{"class":"close","data-dismiss":"alert",type:"button",html:"&times;"}).appendTo(b);e=jQuery("<div/>",{"class":"alert alert-"+c}).appendTo(b);jQuery("<h4/>",{"class":"alert-heading",html:Joomla.JText._(c,c.charAt(0).toUpperCase()+c.slice(1))}).appendTo(e)}else{e=e[0]}jQuery.each(d,function(f,g){jQuery("<p/>",{html:g}).appendTo(e)})})}}eshiol.j2xml.codes=["message","notice","message","notice","notice","notice","message","notice","message","notice","message","notice","message","notice","notice","error","notice","error","error","error","message","notice","message","notice","message","notice","message","notice","error","warning","notice","message","notice","message","notice","message","notice","notice","message","notice","message","notice","message","notice","message","notice","notice"];eshiol.j2xml.sendItem=function(b,e){if(b.cids.length){var f=b.cids.shift();var a=Math.floor(100*b.n/b.tot);window.parent.jQuery("#send-progress-bar").css("width",a+"%").attr("aria-valuenow",b.n);window.parent.jQuery("#send-progress-text").html(Joomla.JText._("LIB_J2XML_SENDING").replace("%s",a+"%"));b.n++;console.log("exporting data from "+b.export_url);console.log(e);Joomla.request({url:b.export_url+"&cid[]="+f,data:Object.keys(e).map(function(g){return encodeURIComponent(g)+"="+encodeURIComponent(e[g])}).join("&"),onSuccess:function d(h){console.log("export.onSuccess");console.log("sending data via xmlrpc to "+b.remote_url);var g=JSON.parse(h);p=e;delete p.compression;console.log(p);jQuery.xmlrpc({url:b.remote_url,methodName:"j2xml.importAjax",params:[g.data,JSON.stringify(p)],xhrFields:{withCredentials:true},success:function(j,i,k){console.log("send.onSuccess");window.parent.jQuery("input:checkbox[name='checkall-toggle']").prop("checked",false);window.parent.jQuery("input:checkbox[name='cid[]'][value='"+f+"']").prop("checked",false);jQuery.each(j,function(l,m){m.forEach(function(n){console.log(n);msg=new Object();if(n.code in eshiol.j2xml.codes){t=eshiol.j2xml.codes[n.code]}else{t="notice"}msg[t]=[n.message];eshiol.renderMessages(msg,b.message_container)})});eshiol.j2xml.sendItem(b,e)},error:function(k,i,j){console.log("send.onError");msg=new Object();if(typeof j==="object"){if(j.code in eshiol.j2xml.codes){t=eshiol.j2xml.codes[j.code]}else{t="error"}msg[t]=[j.message]}else{msg.error=[j]}eshiol.renderMessages(msg,b.message_container);eshiol.j2xml.sendItem(b,e)}})},onError:function c(g){if(g.status>0){Joomla.renderMessages(Joomla.ajaxErrorsMessages(g))}eshiol.j2xml.sendItem(b,e)}})}else{window.parent.jQuery("#send-progress").remove()}};eshiol.j2xml.send=function(c){console.log("eshiol.j2xml.send");c.cids=[];c.tot=0;c.n=0;if(typeof Joomla.getOptions!=="undefined"){var b=Joomla.getOptions("progressBarContainerClass","progress progress-striped active");var a=Joomla.getOptions("progressBarClass","bar bar-success")}else{var b="progress progress-striped active";var a="bar bar-success"}window.parent.jQuery("#system-message-container").prepend('<div id="send-progress" class="send-progress"><div class="'+b+'"><div id="send-progress-bar" class="'+a+'" aria-valuenow="0" aria-valuemin="0" aria-valuemax="'+c.tot+'"></div></div><p class="lead"><span id="send-progress-text" class="sending-text">'+Joomla.JText._("LIB_J2XML_SENDING").replace("%s","0%")+"</span></p></div>");var d={};jQuery("#adminForm input:not(:radio)[name^=jform], #adminForm input:radio[name^=jform]:checked, #adminForm select[name^=jform]").each(function(g){var e=jQuery(this);var f=e.attr("name").match(/jform\[(.*)\]/)[1];if(f.substr(0,5)=="send_"){f=f.substr(5)}if(["cid","remote_url"].indexOf(f)==-1){d[f]=e.val()}});navigator.__defineGetter__("userAgent",function(){return eshiol.j2xml.version});window.parent.jQuery("input:checkbox[name='cid[]']:checked").each(function(){c.cids.push(jQuery(this).val());c.tot++});eshiol.j2xml.sendItem(c,d)};eshiol.XMLToString=function(a){x=(typeof XMLSerializer!=="undefined")?(new window.XMLSerializer()).serializeToString(a):a.xml;return x};if(typeof strstr==="undefined"){function strstr(b,c,a){var d=0;b+="";d=b.indexOf(c);if(d==-1){return false}else{if(a){return b.substr(0,d)}else{return b.slice(d)}}}};